<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Default Surrogate — default_surrogate • mlr3mbo</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.10/font.css" rel="stylesheet"><link href="../deps/JetBrains_Mono-0.4.10/font.css" rel="stylesheet"><link href="../deps/Roboto_Slab-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Default Surrogate — default_surrogate"><meta name="description" content='This is a helper function that constructs a default Surrogate based on properties of the
bbotk::OptimInstance.
For numeric-only (including integers) parameter spaces without any dependencies a Gaussian Process is constricted via
default_gp().
For mixed numeric-categorical parameter spaces, or spaces with conditional parameters a random forest is constructed via
default_rf().
In any case, learners are encapsulated using &amp;#8220;"evaluate"&amp;#8221;, and a fallback learner is set,
in cases where the surrogate learner errors.
Currently, the following learner is used as a fallback:
lrn("regr.ranger", num.trees = 10L, keep.inbag = TRUE, se.method = "jack").
If additionally dependencies are present in the parameter space, inactive conditional parameters
are represented by missing NA values in the training design data.
We simply handle those with an imputation method, added to the random forest, more
concretely we use po("imputesample") (for logicals) and po("imputeoor") (for anything else) from
package mlr3pipelines.
Characters are always encoded as factors via po("colapply").
Out of range imputation makes sense for tree-based methods and is usually hard to beat, see Ding et al. (2010).
In the case of dependencies, the following learner is used as a fallback:
lrn("regr.featureless").
If n_learner is 1, the learner is wrapped as a SurrogateLearner.
Otherwise, if n_learner is larger than 1, multiple deep clones of the learner are wrapped as a SurrogateLearnerCollection.'><meta property="og:description" content='This is a helper function that constructs a default Surrogate based on properties of the
bbotk::OptimInstance.
For numeric-only (including integers) parameter spaces without any dependencies a Gaussian Process is constricted via
default_gp().
For mixed numeric-categorical parameter spaces, or spaces with conditional parameters a random forest is constructed via
default_rf().
In any case, learners are encapsulated using &amp;#8220;"evaluate"&amp;#8221;, and a fallback learner is set,
in cases where the surrogate learner errors.
Currently, the following learner is used as a fallback:
lrn("regr.ranger", num.trees = 10L, keep.inbag = TRUE, se.method = "jack").
If additionally dependencies are present in the parameter space, inactive conditional parameters
are represented by missing NA values in the training design data.
We simply handle those with an imputation method, added to the random forest, more
concretely we use po("imputesample") (for logicals) and po("imputeoor") (for anything else) from
package mlr3pipelines.
Characters are always encoded as factors via po("colapply").
Out of range imputation makes sense for tree-based methods and is usually hard to beat, see Ding et al. (2010).
In the case of dependencies, the following learner is used as a fallback:
lrn("regr.featureless").
If n_learner is 1, the learner is wrapped as a SurrogateLearner.
Otherwise, if n_learner is larger than 1, multiple deep clones of the learner are wrapped as a SurrogateLearnerCollection.'></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">mlr3mbo</a>

    <small class="nav-text text-default me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.3.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html"><span class="fa fa-file-alt"></span> Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://mlr3book.mlr-org.com"><span class="fa fa-link"></span> mlr3book</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/mlr-org/mlr3mbo/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://lmmisld-lmu-stats-slds.srv.mwn.de/mlr_invite/"><span class="fa fa-comments"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://stackoverflow.com/questions/tagged/mlr"><span class="fa fab fa-stack-overflow"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://mlr-org.com/"><span class="fa fa-rss"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Default Surrogate</h1>
      <small class="dont-index">Source: <a href="https://github.com/mlr-org/mlr3mbo/blob/main/R/mbo_defaults.R" class="external-link"><code>R/mbo_defaults.R</code></a></small>
      <div class="d-none name"><code>default_surrogate.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This is a helper function that constructs a default <a href="Surrogate.html">Surrogate</a> based on properties of the
<a href="https://bbotk.mlr-org.com/reference/OptimInstance.html" class="external-link">bbotk::OptimInstance</a>.</p>
<p>For numeric-only (including integers) parameter spaces without any dependencies a Gaussian Process is constricted via
<code><a href="default_gp.html">default_gp()</a></code>.
For mixed numeric-categorical parameter spaces, or spaces with conditional parameters a random forest is constructed via
<code><a href="default_rf.html">default_rf()</a></code>.</p>
<p>In any case, learners are encapsulated using “"evaluate"”, and a fallback learner is set,
in cases where the surrogate learner errors.
Currently, the following learner is used as a fallback:
<code>lrn("regr.ranger", num.trees = 10L, keep.inbag = TRUE, se.method = "jack")</code>.</p>
<p>If additionally dependencies are present in the parameter space, inactive conditional parameters
are represented by missing <code>NA</code> values in the training design data.
We simply handle those with an imputation method, added to the random forest, more
concretely we use <code>po("imputesample")</code> (for logicals) and <code>po("imputeoor")</code> (for anything else) from
package <a href="https://CRAN.R-project.org/package=mlr3pipelines" class="external-link"><span class="pkg">mlr3pipelines</span></a>.
Characters are always encoded as factors via <code>po("colapply")</code>.
Out of range imputation makes sense for tree-based methods and is usually hard to beat, see Ding et al. (2010).
In the case of dependencies, the following learner is used as a fallback:
<code>lrn("regr.featureless")</code>.</p>
<p>If <code>n_learner</code> is <code>1</code>, the learner is wrapped as a <a href="SurrogateLearner.html">SurrogateLearner</a>.
Otherwise, if <code>n_learner</code> is larger than <code>1</code>, multiple deep clones of the learner are wrapped as a <a href="SurrogateLearnerCollection.html">SurrogateLearnerCollection</a>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">default_surrogate</span><span class="op">(</span></span>
<span>  <span class="va">instance</span>,</span>
<span>  learner <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  n_learner <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  force_random_forest <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-instance">instance<a class="anchor" aria-label="anchor" href="#arg-instance"></a></dt>
<dd><p>(<a href="https://bbotk.mlr-org.com/reference/OptimInstance.html" class="external-link">bbotk::OptimInstance</a>)<br>
An object that inherits from <a href="https://bbotk.mlr-org.com/reference/OptimInstance.html" class="external-link">bbotk::OptimInstance</a>.</p></dd>


<dt id="arg-learner">learner<a class="anchor" aria-label="anchor" href="#arg-learner"></a></dt>
<dd><p>(<code>NULL</code> | <a href="https://mlr3.mlr-org.com/reference/Learner.html" class="external-link">mlr3::Learner</a>).
If specified, this learner will be used instead of the defaults described above.</p></dd>


<dt id="arg-n-learner">n_learner<a class="anchor" aria-label="anchor" href="#arg-n-learner"></a></dt>
<dd><p>(<code>NULL</code> | <code>integer(1)</code>).
Number of learners to be considered in the construction of the <a href="Surrogate.html">Surrogate</a>.
If not specified will be based on the number of objectives as stated by the instance.</p></dd>


<dt id="arg-force-random-forest">force_random_forest<a class="anchor" aria-label="anchor" href="#arg-force-random-forest"></a></dt>
<dd><p>(<code>logical(1)</code>).
If <code>TRUE</code>, a random forest is constructed even if the parameter space is numeric-only.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p><a href="Surrogate.html">Surrogate</a></p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>

<ul><li><p>Ding, Yufeng, Simonoff, S J (2010).
“An Investigation of Missing Data Methods for Classification Trees Applied to Binary Response Data.”
<em>Journal of Machine Learning Research</em>, <b>11</b>(1), 131–170.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other mbo_defaults:
<code><a href="default_acqfunction.html">default_acqfunction</a>()</code>,
<code><a href="default_acqoptimizer.html">default_acqoptimizer</a>()</code>,
<code><a href="default_gp.html">default_gp</a>()</code>,
<code><a href="default_loop_function.html">default_loop_function</a>()</code>,
<code><a href="default_result_assigner.html">default_result_assigner</a>()</code>,
<code><a href="default_rf.html">default_rf</a>()</code>,
<code><a href="mbo_defaults.html">mbo_defaults</a></code></p></div>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Marc Becker, Lennart Schneider, Jakob Richter, Michel Lang, Bernd Bischl, Florian Pfisterer, Martin Binder, Sebastian Fischer.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

